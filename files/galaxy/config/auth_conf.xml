<?xml version="1.0"?>
<auth>
<authenticator>
        <type>ldap</type>
        <options>
                 <!-- Whether to allow user registration. Possible values are True,
                 False and Challenge (i.e. allow registration in case of
                 successful authentication). Default is True. -->
                 <allow-register>Challenge</allow-register>

                 <!-- Whether Galaxy should automatically register users when they
                 first login. Default is False. -->
                 <auto-register>True</auto-register>

                <!-- Whether users are allowed to change their password. Default is
                 False. -->
                <allow-password-change>False</allow-password-change>

                 <!-- Whether roles should be automatically created if
                 the attribute specified under auto-register-roles can be found.
                 Default is False. -->
                 <auto-create-roles>False</auto-create-roles>

                 <!-- Whether groups should be automatically created if
                 the attribute specified under auto-register-roles can be found.
                 Can be used in combination with auto-create-roles
                 Default is False. -->
                 <auto-create-groups>False</auto-create-groups>

                 <!-- If set, roles will be assigned to the auto generated groups,
                 not to the individual users. Can only be used if auto-create-roles and
                 auto-create-groups are True. Default is False. -->
                 <auto-assign-roles-to-groups-only>False</auto-assign-roles-to-groups-only>

                 <!-- LDAP-specific options -->
                 <server>ldaps://ldap.uio.no</server>

                <!-- Whether unregistered users should use their LDAP username
                 instead of the email at their first login when auto-register is
                 True. Default is False. -->
                 <login-use-username>True</login-use-username>

                 <!-- Whether to continue with the following authenticators if LDAP
                 fails. Default is False. -->
                 <continue-on-failure>True</continue-on-failure>

                  <!-- For OpenLDAP: -->
                 <search-fields>uid,mail</search-fields>
                 <search-base>cn=users,cn=system,dc=uio,dc=no</search-base>
            
                 <!-- If login-use-username is True -->
                 <search-filter>(uid={username})</search-filter>
                 <search-user>cn=galaxy-hepp,cn=services,dc=uio,dc=no</search-user>

                 <!-- For OpenLDAP: -->
               <bind-user>{dn}</bind-user>
               <bind-password>{password}</bind-password>
               <auto-register-username>{uid}</auto-register-username>
               <auto-register-email>{mail}</auto-register-email>
               <auto-register-roles>{gid}</auto-register-roles>

        </options>
</authenticator>

<authenticator>
        <type>localdb</type>
        <options>
            <!-- Whether users are allowed to change their password. Default is
                 False. -->
            <allow-password-change>true</allow-password-change>
        </options>
</authenticator>
</auth>
